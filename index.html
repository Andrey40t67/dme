<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üî• –ò–î–ï–ê–õ–¨–ù–ê–Ø 3D –ò–ì–†–ê - –ú–ì–ù–û–í–ï–ù–ù–´–ô –û–¢–ö–õ–ò–ö</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Orbitron', monospace;
            background: linear-gradient(135deg, #0c0c0c 0%, #1a0033 25%, #330066 50%, #660033 75%, #330000 100%);
            overflow: hidden;
            color: #00ffff;
            cursor: crosshair;
        }
        
        #gameContainer {
            position: relative;
            width: 100vw;
            height: 100vh;
        }
        
        #gameCanvas {
            display: block;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at center, #000 0%, #001122 30%, #002244 60%, #003366 100%);
            filter: contrast(1.4) brightness(1.2) saturate(1.5);
        }
        
        #ui {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 2000;
        }
        
        #voiceStatus {
            position: absolute;
            top: 10px;
            left: 10px;
            background: linear-gradient(45deg, #00ff00, #00cc00);
            padding: 10px 25px;
            border-radius: 20px;
            border: 2px solid #00ffff;
            font-size: 16px;
            font-weight: 900;
            text-shadow: 0 0 10px #00ffff;
            box-shadow: 0 0 30px rgba(0, 255, 255, 0.8);
            animation: superGlow 1s infinite alternate;
        }
        
        @keyframes superGlow {
            0% { 
                box-shadow: 0 0 30px rgba(0, 255, 255, 0.8);
                transform: scale(1);
            }
            100% { 
                box-shadow: 0 0 50px rgba(0, 255, 0, 1);
                transform: scale(1.02);
            }
        }
        
        #commandPanel {
            position: absolute;
            top: 10px;
            right: 10px;
            background: linear-gradient(135deg, rgba(255, 0, 150, 0.95), rgba(150, 0, 255, 0.9));
            padding: 15px;
            border-radius: 15px;
            border: 3px solid #ff00aa;
            max-width: 350px;
            box-shadow: 0 0 40px rgba(255, 0, 170, 0.7);
        }
        
        #commandPanel h3 {
            color: #ff00aa;
            margin-bottom: 10px;
            text-align: center;
            font-size: 14px;
            font-weight: 900;
        }
        
        .cmd-group {
            background: rgba(0, 0, 0, 0.4);
            margin: 8px 0;
            padding: 8px;
            border-radius: 8px;
            border-left: 4px solid #ff00aa;
        }
        
        .cmd-item {
            font-size: 11px;
            margin: 3px 0;
            font-weight: 700;
            color: #ffffff;
        }
        
        #gameStats {
            position: absolute;
            bottom: 10px;
            left: 10px;
            background: linear-gradient(45deg, rgba(0, 255, 255, 0.95), rgba(0, 200, 255, 0.9));
            padding: 12px 20px;
            border-radius: 12px;
            border: 2px solid #00ffff;
            box-shadow: 0 0 25px rgba(0, 255, 255, 0.6);
        }
        
        .stat-line {
            margin: 2px 0;
            font-weight: 700;
            font-size: 13px;
        }
        
        #responseIndicator {
            position: absolute;
            bottom: 10px;
            right: 10px;
            background: linear-gradient(45deg, #00ff00, #44ff44);
            padding: 8px 15px;
            border-radius: 20px;
            border: 2px solid #00ff00;
            font-weight: 900;
            font-size: 12px;
            animation: pulse 0.5s infinite alternate;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            100% { opacity: 0.7; }
        }
        
        #startBtn {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            padding: 25px 50px;
            font-size: 22px;
            font-weight: 900;
            background: linear-gradient(45deg, #ff0080, #8000ff, #0080ff, #00ff80);
            background-size: 400% 400%;
            border: none;
            border-radius: 50px;
            color: white;
            cursor: pointer;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
            box-shadow: 0 20px 40px rgba(0,0,0,0.4);
            transition: all 0.3s ease;
            pointer-events: all;
            animation: rainbowGlow 2s ease-in-out infinite;
            font-family: 'Orbitron', monospace;
        }
        
        @keyframes rainbowGlow {
            0%, 100% {
                background-position: 0% 50%;
                box-shadow: 0 0 30px rgba(255,0,128,0.8);
            }
            25% {
                background-position: 100% 50%;
                box-shadow: 0 0 30px rgba(128,0,255,0.8);
            }
            50% {
                background-position: 50% 100%;
                box-shadow: 0 0 30px rgba(0,128,255,0.8);
            }
            75% {
                background-position: 0% 100%;
                box-shadow: 0 0 30px rgba(0,255,128,0.8);
            }
        }
        
        .hidden { display: none; }
        
        @media (max-width: 768px) {
            #commandPanel {
                max-width: 300px;
                font-size: 10px;
                right: 5px;
                top: 5px;
            }
            #voiceStatus {
                font-size: 14px;
                left: 5px;
                top: 5px;
            }
            #gameStats {
                font-size: 12px;
                left: 5px;
                bottom: 5px;
            }
        }
    </style>
</head>
<body>
    <div id="gameContainer">
        <canvas id="gameCanvas"></canvas>
        
        <div id="ui">
            <div id="voiceStatus">üé§ –ì–û–õ–û–°: –ü–û–î–ì–û–¢–û–í–ö–ê...</div>
            
            <div id="commandPanel">
                <h3>‚ö° –ú–ì–ù–û–í–ï–ù–ù–´–ï –ö–û–ú–ê–ù–î–´</h3>
                <div class="cmd-group">
                    <div class="cmd-item">üéØ "–ì–û–£" / "–í–ü–ï–†–ï–î" - –î–≤–∏–∂–µ–Ω–∏–µ –≤–ø–µ—Ä–µ–¥</div>
                    <div class="cmd-item">üîÑ "–ë–≠–ö" / "–ù–ê–ó–ê–î" - –î–≤–∏–∂–µ–Ω–∏–µ –Ω–∞–∑–∞–¥</div>
                    <div class="cmd-item">‚¨ÖÔ∏è "–õ–ï–í–û" - –ü–æ–≤–æ—Ä–æ—Ç –≤–ª–µ–≤–æ</div>
                    <div class="cmd-item">‚û°Ô∏è "–ü–†–ê–í–û" - –ü–æ–≤–æ—Ä–æ—Ç –≤–ø—Ä–∞–≤–æ</div>
                </div>
                <div class="cmd-group">
                    <div class="cmd-item">üöÄ "–ê–ü" / "–í–í–ï–†–•" - –í–∑–ª–µ—Ç</div>
                    <div class="cmd-item">‚¨áÔ∏è "–î–ê–£–ù" / "–í–ù–ò–ó" - –°–Ω–∏–∂–µ–Ω–∏–µ</div>
                    <div class="cmd-item">‚ö° "–§–ê–°–¢" / "–ë–´–°–¢–†–û" - –£—Å–∫–æ—Ä–µ–Ω–∏–µ</div>
                    <div class="cmd-item">üêå "–°–õ–û–£" / "–ú–ï–î–õ–ï–ù–ù–û" - –ó–∞–º–µ–¥–ª–µ–Ω–∏–µ</div>
                </div>
                <div class="cmd-group">
                    <div class="cmd-item">‚õî "–°–¢–û–ü" - –û—Å—Ç–∞–Ω–æ–≤–∫–∞</div>
                    <div class="cmd-item">üí• "–ë–£–ú" / "–í–ó–†–´–í" - –≠—Ñ—Ñ–µ–∫—Ç—ã</div>
                    <div class="cmd-item">üåà "–ö–û–õ–û–†" / "–¶–í–ï–¢" - –°–º–µ–Ω–∞ —Ü–≤–µ—Ç–∞</div>
                    <div class="cmd-item">‚ö° "FLASH" / "–ú–û–õ–ù–ò–Ø" - –ú–æ–ª–Ω–∏—è</div>
                </div>
            </div>
            
            <div id="gameStats">
                <div class="stat-line">‚ö° –°–∫–æ—Ä–æ—Å—Ç—å: <span id="speedVal">0.0</span></div>
                <div class="stat-line">üìç X: <span id="xPos">0.0</span></div>
                <div class="stat-line">üìç Y: <span id="yPos">0.0</span></div>
                <div class="stat-line">üìç Z: <span id="zPos">0.0</span></div>
                <div class="stat-line">üé§ –ö–æ–º–∞–Ω–¥: <span id="cmdCount">0</span></div>
            </div>
            
            <div id="responseIndicator">‚ö° –ú–ì–ù–û–í–ï–ù–ù–´–ô –û–¢–ö–õ–ò–ö</div>
            
            <button id="startBtn">üöÄ –ó–ê–ü–£–°–ö –ò–î–ï–ê–õ–¨–ù–û–ô –ò–ì–†–´</button>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
        // –ì–õ–û–ë–ê–õ–¨–ù–´–ï –ü–ï–†–ï–ú–ï–ù–ù–´–ï
        let scene, camera, renderer, player, world = [];
        let gameActive = false;
        let voiceRecognition = null;
        let speed = 0.2;
        let pos = { x: 0, y: 3, z: 0 };
        let voiceActive = false;
        let commandCount = 0;
        let particleSystems = [], lightSources = [];
        
        // –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –°–£–ü–ï–† 3D –î–í–ò–ñ–ö–ê
        function initSuperEngine() {
            console.log('üöÄ –ó–ê–ü–£–°–ö –°–£–ü–ï–† –î–í–ò–ñ–ö–ê...');
            
            // –°–û–ó–î–ê–ù–ò–ï –°–¶–ï–ù–´
            scene = new THREE.Scene();
            scene.background = new THREE.Color(0x000022);
            scene.fog = new THREE.FogExp2(0x000044, 0.015);
            
            // –°–£–ü–ï–† –ö–ê–ú–ï–†–ê
            camera = new THREE.PerspectiveCamera(90, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.set(0, 10, 20);
            
            // –ú–ê–ö–°–ò–ú–ê–õ–¨–ù–´–ô –†–ï–ù–î–ï–†–ï–†
            renderer = new THREE.WebGLRenderer({ 
                canvas: document.getElementById('gameCanvas'),
                antialias: true,
                powerPreference: 'high-performance'
            });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
            renderer.shadowMap.enabled = true;
            renderer.shadowMap.type = THREE.PCFSoftShadowMap;
            renderer.outputEncoding = THREE.sRGBEncoding;
            
            // –°–û–ó–î–ê–ù–ò–ï –ò–ì–†–û–ö–ê
            createSuperPlayer();
            // –°–û–ó–î–ê–ù–ò–ï –ú–ò–†–ê
            createSuperWorld();
            // –°–£–ü–ï–† –û–°–í–ï–©–ï–ù–ò–ï
            createSuperLighting();
            // –°–ò–°–¢–ï–ú–ê –ß–ê–°–¢–ò–¶
            createSuperParticles();
            
            console.log('‚úÖ –°–£–ü–ï–† –î–í–ò–ñ–û–ö –ì–û–¢–û–í!');
        }
        
        function createSuperPlayer() {
            // –ì–ï–û–ú–ï–¢–†–ò–Ø –ò–ì–†–û–ö–ê
            const geometry = new THREE.DodecahedronGeometry(1, 1);
            const material = new THREE.MeshPhysicalMaterial({
                color: 0x00ff88,
                emissive: 0x004422,
                metalness: 0.8,
                roughness: 0.2,
                clearcoat: 1,
                clearcoatRoughness: 0
            });
            
            player = new THREE.Mesh(geometry, material);
            player.position.set(0, 3, 0);
            player.castShadow = true;
            scene.add(player);
            
            // –ê–£–†–ê –ò–ì–†–û–ö–ê
            const auraGeometry = new THREE.SphereGeometry(2, 16, 16);
            const auraMaterial = new THREE.MeshBasicMaterial({
                color: 0x00ffff,
                transparent: true,
                opacity: 0.1,
                wireframe: true
            });
            const aura = new THREE.Mesh(auraGeometry, auraMaterial);
            player.add(aura);
        }
        
        function createSuperWorld() {
            // –°–£–ü–ï–† –ó–ï–ú–õ–Ø
            const groundGeo = new THREE.PlaneGeometry(300, 300, 100, 100);
            const groundMat = new THREE.MeshStandardMaterial({
                color: 0x112244,
                metalness: 0.1,
                roughness: 0.9
            });
            const ground = new THREE.Mesh(groundGeo, groundMat);
            ground.rotation.x = -Math.PI / 2;
            ground.receiveShadow = true;
            scene.add(ground);
            
            // –û–ë–™–ï–ö–¢–´ –ú–ò–†–ê
            for (let i = 0; i < 50; i++) {
                const geometries = [
                    new THREE.BoxGeometry(2, 5, 2),
                    new THREE.ConeGeometry(1.5, 6, 8),
                    new THREE.CylinderGeometry(1, 1, 5, 12),
                    new THREE.SphereGeometry(1.5, 16, 16),
                    new THREE.OctahedronGeometry(2)
                ];
                
                const geo = geometries[Math.floor(Math.random() * geometries.length)];
                const mat = new THREE.MeshStandardMaterial({
                    color: new THREE.Color().setHSL(Math.random(), 0.9, 0.6),
                    metalness: Math.random() * 0.5,
                    roughness: Math.random() * 0.7,
                    emissive: new THREE.Color().setHSL(Math.random(), 0.3, 0.05)
                });
                
                const mesh = new THREE.Mesh(geo, mat);
                mesh.position.set(
                    (Math.random() - 0.5) * 150,
                    2.5,
                    (Math.random() - 0.5) * 150
                );
                mesh.rotation.set(
                    Math.random() * Math.PI,
                    Math.random() * Math.PI,
                    Math.random() * Math.PI
                );
                mesh.castShadow = true;
                mesh.receiveShadow = true;
                
                scene.add(mesh);
                world.push(mesh);
            }
        }
        
        function createSuperLighting() {
            // –û–°–ù–û–í–ù–û–ô –°–í–ï–¢
            const mainLight = new THREE.DirectionalLight(0xffffff, 1.5);
            mainLight.position.set(30, 50, 20);
            mainLight.castShadow = true;
            mainLight.shadow.mapSize.width = 4096;
            mainLight.shadow.mapSize.height = 4096;
            scene.add(mainLight);
            
            // –¶–í–ï–¢–ù–´–ï –û–ì–ù–ò
            const colors = [0xff0080, 0x0080ff, 0x80ff00, 0xff8000, 0x8000ff, 0x00ff80];
            for (let i = 0; i < 12; i++) {
                const light = new THREE.PointLight(colors[i % colors.length], 2, 40);
                light.position.set(
                    (Math.random() - 0.5) * 100,
                    8 + Math.random() * 20,
                    (Math.random() - 0.5) * 100
                );
                scene.add(light);
                lightSources.push(light);
            }
            
            // –û–ö–†–£–ñ–ê–Æ–©–ò–ô –°–í–ï–¢
            const ambientLight = new THREE.AmbientLight(0x404080, 0.6);
            scene.add(ambientLight);
        }
        
        function createSuperParticles() {
            // –°–ò–°–¢–ï–ú–ê –°–£–ü–ï–† –ß–ê–°–¢–ò–¶
            const particleCount = 3000;
            const positions = new Float32Array(particleCount * 3);
            const colors = new Float32Array(particleCount * 3);
            const sizes = new Float32Array(particleCount);
            
            for (let i = 0; i < particleCount; i++) {
                positions[i * 3] = (Math.random() - 0.5) * 400;
                positions[i * 3 + 1] = Math.random() * 150;
                positions[i * 3 + 2] = (Math.random() - 0.5) * 400;
                
                const color = new THREE.Color().setHSL(Math.random(), 1, 0.7);
                colors[i * 3] = color.r;
                colors[i * 3 + 1] = color.g;
                colors[i * 3 + 2] = color.b;
                
                sizes[i] = Math.random() * 3 + 1;
            }
            
            const particleGeo = new THREE.BufferGeometry();
            particleGeo.setAttribute('position', new THREE.BufferAttribute(positions, 3));
            particleGeo.setAttribute('color', new THREE.BufferAttribute(colors, 3));
            particleGeo.setAttribute('size', new THREE.BufferAttribute(sizes, 1));
            
            const particleMat = new THREE.PointsMaterial({
                size: 2,
                vertexColors: true,
                transparent: true,
                opacity: 0.9,
                blending: THREE.AdditiveBlending
            });
            
            const particles = new THREE.Points(particleGeo, particleMat);
            scene.add(particles);
            particleSystems.push(particles);
        }
        
        // –ú–ì–ù–û–í–ï–ù–ù–û–ï –ì–û–õ–û–°–û–í–û–ï –£–ü–†–ê–í–õ–ï–ù–ò–ï
        function initInstantVoice() {
            console.log('üé§ –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ú–ì–ù–û–í–ï–ù–ù–û–ì–û –ì–û–õ–û–°–ê...');
            
            if ('webkitSpeechRecognition' in window) {
                voiceRecognition = new webkitSpeechRecognition();
            } else if ('SpeechRecognition' in window) {
                voiceRecognition = new SpeechRecognition();
            } else {
                console.error('‚ùå –ì–æ–ª–æ—Å–æ–≤–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è');
                return false;
            }
            
            // –°–£–ü–ï–† –ù–ê–°–¢–†–û–ô–ö–ò –î–õ–Ø –ú–ì–ù–û–í–ï–ù–ù–û–ì–û –û–¢–ö–õ–ò–ö–ê
            voiceRecognition.continuous = true;
            voiceRecognition.interimResults = true; // –í–ê–ñ–ù–û –î–õ–Ø –°–ö–û–†–û–°–¢–ò!
            voiceRecognition.lang = 'ru-RU';
            voiceRecognition.maxAlternatives = 1;
            
            voiceRecognition.onstart = () => {
                voiceActive = true;
                document.getElementById('voiceStatus').innerHTML = 'üé§ –ì–û–õ–û–°: üü¢ –ê–ö–¢–ò–í–ï–ù';
                document.getElementById('voiceStatus').style.background = 'linear-gradient(45deg, #00ff00, #44ff44)';
                console.log('‚úÖ –ì–û–õ–û–° –ê–ö–¢–ò–í–ï–ù!');
            };
            
            voiceRecognition.onresult = (event) => {
                // –û–ë–†–ê–ë–û–¢–ö–ê –ò –ü–†–û–ú–ï–ñ–£–¢–û–ß–ù–´–• –ò –§–ò–ù–ê–õ–¨–ù–´–• –†–ï–ó–£–õ–¨–¢–ê–¢–û–í
                for (let i = event.resultIndex; i < event.results.length; i++) {
                    const transcript = event.results[i][0].transcript.toLowerCase().trim();
                    
                    // –ú–ì–ù–û–í–ï–ù–ù–ê–Ø –û–ë–†–ê–ë–û–¢–ö–ê –î–ê–ñ–ï –ü–†–û–ú–ï–ñ–£–¢–û–ß–ù–´–• –†–ï–ó–£–õ–¨–¢–ê–¢–û–í
                    if (transcript.length > 1) {
                        processInstantCommand(transcript);
                    }
                }
            };
            
            voiceRecognition.onerror = (event) => {
                console.log('‚ö†Ô∏è –û—à–∏–±–∫–∞:', event.error);
                // –ú–ì–ù–û–í–ï–ù–ù–´–ô –ü–ï–†–ï–ó–ê–ü–£–°–ö
                setTimeout(() => {
                    if (gameActive) {
                        try {
                            voiceRecognition.start();
                        } catch (e) {}
                    }
                }, 100);
            };
            
            voiceRecognition.onend = () => {
                if (gameActive) {
                    // –ú–ì–ù–û–í–ï–ù–ù–´–ô –ü–ï–†–ï–ó–ê–ü–£–°–ö –ë–ï–ó –ó–ê–î–ï–†–ñ–ï–ö
                    setTimeout(() => {
                        try {
                            voiceRecognition.start();
                        } catch (e) {}
                    }, 50);
                }
            };
            
            // –ó–ê–ü–£–°–ö
            try {
                voiceRecognition.start();
                return true;
            } catch (error) {
                console.error('‚ùå –û—à–∏–±–∫–∞ –∑–∞–ø—É—Å–∫–∞:', error);
                return false;
            }
        }
        
        // –û–ë–†–ê–ë–û–¢–ö–ê –ú–ì–ù–û–í–ï–ù–ù–´–• –ö–û–ú–ê–ù–î
        function processInstantCommand(cmd) {
            commandCount++;
            console.log('‚ö° –ú–ì–ù–û–í–ï–ù–ù–ê–Ø –ö–û–ú–ê–ù–î–ê:', cmd);
            
            // –°–£–ü–ï–† –ü–†–û–°–¢–´–ï –ö–û–ú–ê–ù–î–´ –î–õ–Ø 100% –†–ê–°–ü–û–ó–ù–ê–í–ê–ù–ò–Ø
            if (cmd.includes('–≥–æ—É') || cmd.includes('–≤–ø–µ—Ä–µ–¥') || cmd.includes('–≥–æ')) {
                movePlayerInstant(0, 0, -speed * 3);
                showResponse('–í–ü–ï–†–ï–î!');
            } 
            else if (cmd.includes('–±—ç–∫') || cmd.includes('–Ω–∞–∑–∞–¥') || cmd.includes('–±–µ–∫')) {
                movePlayerInstant(0, 0, speed * 3);
                showResponse('–ù–ê–ó–ê–î!');
            } 
            else if (cmd.includes('–ª–µ–≤–æ') || cmd.includes('–≤–ª–µ–≤–æ')) {
                movePlayerInstant(-speed * 3, 0, 0);
                showResponse('–í–õ–ï–í–û!');
            } 
            else if (cmd.includes('–ø—Ä–∞–≤–æ') || cmd.includes('–≤–ø—Ä–∞–≤–æ')) {
                movePlayerInstant(speed * 3, 0, 0);
                showResponse('–í–ü–†–ê–í–û!');
            } 
            else if (cmd.includes('–∞–ø') || cmd.includes('–≤–≤–µ—Ä—Ö') || cmd.includes('–≤–µ—Ä—Ö')) {
                movePlayerInstant(0, speed * 2, 0);
                showResponse('–í–í–ï–†–•!');
                createLiftEffect();
            } 
            else if (cmd.includes('–¥–∞—É–Ω') || cmd.includes('–≤–Ω–∏–∑') || cmd.includes('–Ω–∏–∑')) {
                movePlayerInstant(0, -speed * 2, 0);
                showResponse('–í–ù–ò–ó!');
            } 
            else if (cmd.includes('—Ñ–∞—Å—Ç') || cmd.includes('–±—ã—Å—Ç—Ä–æ') || cmd.includes('—É—Å–∫–æ—Ä')) {
                speed = Math.min(speed * 1.5, 3.0);
                showResponse('–£–°–ö–û–†–ï–ù–ò–ï!');
                createSpeedEffect();
            } 
            else if (cmd.includes('—Å–ª–æ—É') || cmd.includes('–º–µ–¥–ª–µ–Ω–Ω–æ') || cmd.includes('—Ç–∏—Ö–æ')) {
                speed = Math.max(speed * 0.7, 0.1);
                showResponse('–ó–ê–ú–ï–î–õ–ï–ù–ò–ï!');
            } 
            else if (cmd.includes('—Å—Ç–æ–ø') || cmd.includes('—Å—Ç–æ–π')) {
                speed = 0;
                setTimeout(() => speed = 0.2, 2000);
                showResponse('–°–¢–û–ü!');
            } 
            else if (cmd.includes('–±—É–º') || cmd.includes('–≤–∑—Ä—ã–≤') || cmd.includes('—ç—Ñ—Ñ–µ–∫—Ç')) {
                createInstantExplosion();
                showResponse('–í–ó–†–´–í!');
            } 
            else if (cmd.includes('–∫–æ–ª–æ—Ä') || cmd.includes('—Ü–≤–µ—Ç')) {
                changePlayerColor();
                showResponse('–¶–í–ï–¢!');
            } 
            else if (cmd.includes('—Ñ–ª–∞—à') || cmd.includes('–º–æ–ª–Ω–∏—è') || cmd.includes('flash')) {
                createLightningEffect();
                showResponse('–ú–û–õ–ù–ò–Ø!');
            }
            
            updateStats();
        }
        
        function movePlayerInstant(dx, dy, dz) {
            if (!player) return;
            
            player.position.x += dx;
            player.position.y = Math.max(1, player.position.y + dy);
            player.position.z += dz;
            
            // –ì–†–ê–ù–ò–¶–´
            player.position.x = Math.max(-140, Math.min(140, player.position.x));
            player.position.z = Math.max(-140, Math.min(140, player.position.z));
            
            // –ú–ì–ù–û–í–ï–ù–ù–û–ï –°–õ–ï–î–û–í–ê–ù–ò–ï –ö–ê–ú–ï–†–´
            camera.position.x = player.position.x;
            camera.position.y = player.position.y + 10;
            camera.position.z = player.position.z + 20;
            camera.lookAt(player.position);
            
            pos = {
                x: player.position.x.toFixed(1),
                y: player.position.y.toFixed(1),
                z: player.position.z.toFixed(1)
            };
        }
        
        function showResponse(text) {
            const indicator = document.getElementById('responseIndicator');
            indicator.innerHTML = `‚ö° ${text}`;
            indicator.style.background = 'linear-gradient(45deg, #ff0080, #00ff80)';
            setTimeout(() => {
                indicator.innerHTML = '‚ö° –ú–ì–ù–û–í–ï–ù–ù–´–ô –û–¢–ö–õ–ò–ö';
                indicator.style.background = 'linear-gradient(45deg, #00ff00, #44ff44)';
            }, 1000);
        }
        
        function createInstantExplosion() {
            for (let i = 0; i < 80; i++) {
                const geo = new THREE.SphereGeometry(0.2, 6, 6);
                const mat = new THREE.MeshBasicMaterial({
                    color: new THREE.Color().setHSL(Math.random(), 1, 0.8)
                });
                const spark = new THREE.Mesh(geo, mat);
                
                spark.position.copy(player.position);
                spark.velocity = new THREE.Vector3(
                    (Math.random() - 0.5) * 8,
                    Math.random() * 8,
                    (Math.random() - 0.5) * 8
                );
                
                scene.add(spark);
                
                setTimeout(() => scene.remove(spark), 2000);
            }
        }
        
        function changePlayerColor() {
            if (player && player.material) {
                const hue = Math.random();
                player.material.color.setHSL(hue, 0.9, 0.6);
                player.material.emissive.setHSL(hue, 0.5, 0.1);
            }
        }
        
        function createLiftEffect() {
            const ringGeo = new THREE.TorusGeometry(3, 0.5, 8, 16);
            const ringMat = new THREE.MeshBasicMaterial({
                color: 0x00ffff,
                transparent: true,
                opacity: 0.8
            });
            const ring = new THREE.Mesh(ringGeo, ringMat);
            ring.position.copy(player.position);
            ring.position.y -= 1;
            scene.add(ring);
            
            setTimeout(() => scene.remove(ring), 1000);
        }
        
        function createSpeedEffect() {
            for (let i = 0; i < 20; i++) {
                const trailGeo = new THREE.ConeGeometry(0.1, 3, 4);
                const trailMat = new THREE.MeshBasicMaterial({
                    color: 0xffff00,
                    transparent: true,
                    opacity: 0.7
                });
                const trail = new THREE.Mesh(trailGeo, trailMat);
                trail.position.copy(player.position);
                trail.position.add(new THREE.Vector3(
                    (Math.random() - 0.5) * 2,
                    (Math.random() - 0.5) * 2,
                    (Math.random() - 0.5) * 2
                ));
                scene.add(trail);
                
                setTimeout(() => scene.remove(trail), 800);
            }
        }
        
        function createLightningEffect() {
            const lightningGeo = new THREE.CylinderGeometry(0.1, 0.1, 25, 8);
            const lightningMat = new THREE.MeshBasicMaterial({
                color: 0xffffff,
                transparent: true,
                opacity: 1
            });
            const lightning = new THREE.Mesh(lightningGeo, lightningMat);
            lightning.position.copy(player.position);
            lightning.position.y += 12;
            scene.add(lightning);
            
            setTimeout(() => scene.remove(lightning), 300);
        }
        
        function updateStats() {
            document.getElementById('speedVal').textContent = speed.toFixed(2);
            document.getElementById('xPos').textContent = pos.x;
            document.getElementById('yPos').textContent = pos.y;
            document.getElementById('zPos').textContent = pos.z;
            document.getElementById('cmdCount').textContent = commandCount;
        }
        
        // –°–£–ü–ï–† –ò–ì–†–û–í–û–ô –¶–ò–ö–õ
        function superGameLoop() {
            if (!gameActive) return;
            
            requestAnimationFrame(superGameLoop);
            
            const time = Date.now() * 0.001;
            
            // –ê–ù–ò–ú–ê–¶–ò–Ø –ò–ì–†–û–ö–ê
            if (player) {
                player.rotation.y += 0.03;
                player.rotation.x = Math.sin(time * 2) * 0.15;
                player.position.y += Math.sin(time * 4) * 0.02;
                
                // –ê–ù–ò–ú–ê–¶–ò–Ø –ê–£–†–´
                if (player.children[0]) {
                    player.children[0].rotation.y -= 0.05;
                    player.children[0].scale.setScalar(1 + Math.sin(time * 5) * 0.2);
                }
            }
            
            // –ê–ù–ò–ú–ê–¶–ò–Ø –ß–ê–°–¢–ò–¶
            particleSystems.forEach(system => {
                system.rotation.y += 0.008;
                system.rotation.x += 0.004;
            });
            
            // –ê–ù–ò–ú–ê–¶–ò–Ø –û–°–í–ï–©–ï–ù–ò–Ø
            lightSources.forEach((light, i) => {
                light.intensity = 2 + Math.sin(time * 3 + i) * 0.8;
                light.position.y += Math.sin(time * 2 + i) * 0.05;
            });
            
            // –ê–ù–ò–ú–ê–¶–ò–Ø –ú–ò–†–ê
            world.forEach((obj, i) => {
                obj.rotation.y += 0.015 + i * 0.001;
                obj.rotation.x += 0.008;
                obj.position.y = 2.5 + Math.sin(time * 1.5 + i) * 0.8;
            });
            
            renderer.render(scene, camera);
        }
        
        // –ó–ê–ü–£–°–ö –ò–î–ï–ê–õ–¨–ù–û–ô –ò–ì–†–´
        function startPerfectGame() {
            console.log('üöÄ –ó–ê–ü–£–°–ö –ò–î–ï–ê–õ–¨–ù–û–ô –ò–ì–†–´...');
            
            gameActive = true;
            document.getElementById('startBtn').classList.add('hidden');
            
            // –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø
            initSuperEngine();
            
            // –ó–ê–ü–£–°–ö –ì–û–õ–û–°–ê –° –ó–ê–î–ï–†–ñ–ö–û–ô
            setTimeout(() => {
                initInstantVoice();
            }, 1000);
            
            // –ó–ê–ü–£–°–ö –ò–ì–†–û–í–û–ì–û –¶–ò–ö–õ–ê
            superGameLoop();
            updateStats();
            
            console.log('‚úÖ –ò–î–ï–ê–õ–¨–ù–ê–Ø –ò–ì–†–ê –ó–ê–ü–£–©–ï–ù–ê!');
        }
        
        // –û–ë–†–ê–ë–û–¢–ö–ê –ò–ó–ú–ï–ù–ï–ù–ò–Ø –†–ê–ó–ú–ï–†–ê
        function onResize() {
            if (camera && renderer) {
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth, window.innerHeight);
            }
        }
        
        // –°–û–ë–´–¢–ò–Ø
        document.getElementById('startBtn').addEventListener('click', startPerfectGame);
        window.addEventListener('resize', onResize);
        
        // –ê–í–¢–û–ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø
        window.addEventListener('load', () => {
            console.log('üåü –ò–î–ï–ê–õ–¨–ù–ê–Ø –°–ò–°–¢–ï–ú–ê –ì–û–¢–û–í–ê!');
        });
        
        // –°–ò–°–¢–ï–ú–ê –ê–í–¢–û–ü–ï–†–ï–ó–ê–ü–£–°–ö–ê –ì–û–õ–û–°–ê
        setInterval(() => {
            if (gameActive && !voiceActive && voiceRecognition) {
                console.log('üîÑ –ü–ï–†–ï–ó–ê–ü–£–°–ö –ì–û–õ–û–°–ê...');
                try {
                    voiceRecognition.start();
                } catch (e) {}
            }
        }, 2000);
    </script>
</body>
</html>
