<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üöÄ –ú–ï–ì–ê 3D –ò–ì–†–ê - –ê–í–¢–û–ê–ö–¢–ò–í–ê–¶–ò–Ø –ì–û–õ–û–°–ê</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Courier New', monospace;
            background: linear-gradient(45deg, #0a0a0a, #1a1a3a, #2a0a3a);
            overflow: hidden;
            color: #00ff00;
            cursor: none;
        }
        
        #gameContainer {
            position: relative;
            width: 100vw;
            height: 100vh;
        }
        
        #gameCanvas {
            display: block;
            width: 100%;
            height: 100%;
            background: radial-gradient(ellipse at center, #000428 0%, #004e92 100%);
            filter: contrast(1.2) brightness(1.1) saturate(1.3);
        }
        
        #ui {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1000;
        }
        
        #voiceStatus {
            position: absolute;
            top: 15px;
            left: 15px;
            background: linear-gradient(45deg, rgba(0,255,0,0.9), rgba(0,200,0,0.7));
            padding: 12px 25px;
            border-radius: 25px;
            border: 3px solid #00ff00;
            font-size: 18px;
            font-weight: bold;
            text-shadow: 0 0 15px #00ff00;
            box-shadow: 0 0 30px rgba(0, 255, 0, 0.5), inset 0 0 10px rgba(0,255,0,0.2);
            animation: activeGlow 1.5s infinite alternate;
        }
        
        @keyframes activeGlow {
            0% { 
                box-shadow: 0 0 30px rgba(0, 255, 0, 0.5), inset 0 0 10px rgba(0,255,0,0.2);
                transform: scale(1);
            }
            100% { 
                box-shadow: 0 0 50px rgba(0, 255, 0, 0.8), inset 0 0 20px rgba(0,255,0,0.4);
                transform: scale(1.05);
            }
        }
        
        #commands {
            position: absolute;
            top: 15px;
            right: 15px;
            background: linear-gradient(135deg, rgba(255,0,100,0.9), rgba(100,0,255,0.8));
            padding: 15px;
            border-radius: 15px;
            border: 2px solid #ff0080;
            max-width: 320px;
            box-shadow: 0 0 25px rgba(255,0,128,0.4);
        }
        
        #commands h3 {
            color: #ff0080;
            margin-bottom: 12px;
            text-align: center;
            font-size: 16px;
            text-shadow: 0 0 10px #ff0080;
        }
        
        #commands ul {
            list-style: none;
            font-size: 13px;
            line-height: 1.4;
        }
        
        #commands li {
            margin: 4px 0;
            padding: 6px 10px;
            background: rgba(255, 0, 128, 0.2);
            border-radius: 8px;
            border-left: 3px solid #ff0080;
            transition: all 0.3s ease;
        }
        
        #gameInfo {
            position: absolute;
            bottom: 15px;
            left: 15px;
            background: linear-gradient(45deg, rgba(0,255,255,0.9), rgba(0,150,255,0.8));
            padding: 12px 20px;
            border-radius: 15px;
            border: 2px solid #00ffff;
            box-shadow: 0 0 25px rgba(0,255,255,0.4);
        }
        
        #gameInfo div {
            margin: 3px 0;
            font-weight: bold;
            text-shadow: 0 0 8px #00ffff;
        }
        
        #autoStart {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            padding: 25px 50px;
            font-size: 20px;
            font-weight: bold;
            background: linear-gradient(45deg, #ff0080, #8000ff, #0080ff);
            border: none;
            border-radius: 50px;
            color: white;
            cursor: pointer;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
            box-shadow: 0 15px 35px rgba(0,0,0,0.3);
            transition: all 0.3s ease;
            pointer-events: all;
            animation: megaGlow 2s infinite;
        }
        
        @keyframes megaGlow {
            0%, 100% { 
                box-shadow: 0 0 30px rgba(255,0,128,0.6), 0 0 60px rgba(128,0,255,0.4);
                transform: translate(-50%, -50%) scale(1);
            }
            50% { 
                box-shadow: 0 0 50px rgba(255,0,128,0.8), 0 0 80px rgba(128,0,255,0.6);
                transform: translate(-50%, -50%) scale(1.05);
            }
        }
        
        #autoStart:hover {
            transform: translate(-50%, -50%) scale(1.1);
            background: linear-gradient(45deg, #ff0040, #4000ff, #0040ff);
        }
        
        .hidden {
            display: none;
        }
        
        #forceActivation {
            position: absolute;
            bottom: 50%;
            left: 50%;
            transform: translate(-50%, 50%);
            background: linear-gradient(45deg, #ff4444, #ff8800);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            pointer-events: all;
            box-shadow: 0 0 20px rgba(255,68,68,0.6);
            animation: urgentPulse 1s infinite;
        }
        
        @keyframes urgentPulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        /* –ú–µ–≥–∞ –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        @media (max-width: 768px) {
            #commands {
                right: 10px;
                top: 10px;
                max-width: 280px;
                font-size: 12px;
            }
            
            #voiceStatus {
                left: 10px;
                top: 80px;
                font-size: 14px;
            }
            
            #gameInfo {
                bottom: 10px;
                left: 10px;
                font-size: 13px;
            }
            
            #autoStart {
                padding: 20px 40px;
                font-size: 18px;
            }
        }
        
        /* –ß–∞—Å—Ç–∏—Ü—ã –≤ UI */
        .ui-particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: #00ff00;
            border-radius: 50%;
            pointer-events: none;
            animation: uiFloat 4s infinite ease-in-out;
        }
        
        @keyframes uiFloat {
            0%, 100% { 
                transform: translate(0, 0) rotate(0deg);
                opacity: 0.8;
            }
            25% { 
                transform: translate(10px, -20px) rotate(90deg);
                opacity: 1;
            }
            50% { 
                transform: translate(-10px, -40px) rotate(180deg);
                opacity: 0.6;
            }
            75% { 
                transform: translate(-20px, -20px) rotate(270deg);
                opacity: 1;
            }
        }
    </style>
</head>
<body>
    <div id="gameContainer">
        <canvas id="gameCanvas"></canvas>
        
        <div id="ui">
            <div id="voiceStatus">üé§ –ì–û–õ–û–°: –ì–û–¢–û–í –ö –ê–ö–¢–ò–í–ê–¶–ò–ò</div>
            
            <div id="commands">
                <h3>üéÆ –ú–ï–ì–ê –ì–û–õ–û–°–û–í–´–ï –ö–û–ú–ê–ù–î–´</h3>
                <ul>
                    <li>üöÄ "–í–ü–ï–†–ï–î" - –¢—É—Ä–±–æ –¥–≤–∏–∂–µ–Ω–∏–µ –≤–ø–µ—Ä–µ–¥</li>
                    <li>üîÑ "–ù–ê–ó–ê–î" - –†–µ–≤–µ—Ä—Å –¥–≤–∏–∂–µ–Ω–∏–µ</li>
                    <li>‚¨ÖÔ∏è "–í–õ–ï–í–û" - –õ–µ–≤—ã–π –º–∞–Ω–µ–≤—Ä</li>
                    <li>‚û°Ô∏è "–í–ü–†–ê–í–û" - –ü—Ä–∞–≤—ã–π –º–∞–Ω–µ–≤—Ä</li>
                    <li>‚¨ÜÔ∏è "–í–í–ï–†–•" - –í–∑–ª–µ—Ç –≤ –∫–æ—Å–º–æ—Å</li>
                    <li>‚¨áÔ∏è "–í–ù–ò–ó" - –ü—Ä–∏–∑–µ–º–ª–µ–Ω–∏–µ</li>
                    <li>üåü "–£–°–ö–û–†–ï–ù–ò–ï" - –ú–µ–≥–∞ —Å–∫–æ—Ä–æ—Å—Ç—å</li>
                    <li>üêå "–ú–ï–î–õ–ï–ù–ù–û" - –¢–æ—á–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</li>
                    <li>üéØ "–°–¢–û–ü" - –≠–∫—Å—Ç—Ä–µ–Ω–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞</li>
                    <li>üí• "–í–ó–†–´–í" - –ú–µ–≥–∞ —ç—Ñ—Ñ–µ–∫—Ç—ã</li>
                    <li>üåà "–¶–í–ï–¢" - –°–º–µ–Ω–∞ —Ü–≤–µ—Ç–∞</li>
                    <li>‚ö° "–ú–û–õ–ù–ò–Ø" - –°—É–ø–µ—Ä –∞—Ç–∞–∫–∞</li>
                </ul>
            </div>
            
            <div id="gameInfo">
                <div>‚ö° –ú–µ–≥–∞-–°–∫–æ—Ä–æ—Å—Ç—å: <span id="speed">0.00</span></div>
                <div>üåç –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ X: <span id="posX">0.00</span></div>
                <div>üåç –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ Y: <span id="posY">0.00</span></div>
                <div>üåç –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ Z: <span id="posZ">0.00</span></div>
                <div>üé§ –°—Ç–∞—Ç—É—Å: <span id="voiceReady">–û–ñ–ò–î–ê–ù–ò–ï</span></div>
            </div>
            
            <button id="autoStart">üöÄ –ê–í–¢–û–ó–ê–ü–£–°–ö –ú–ï–ì–ê –ò–ì–†–´</button>
            <button id="forceActivation" class="hidden">üî• –ü–†–ò–ù–£–î–ò–¢–ï–õ–¨–ù–ê–Ø –ê–ö–¢–ò–í–ê–¶–ò–Ø –ì–û–õ–û–°–ê</button>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
        // –ú–µ–≥–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let scene, camera, renderer, player, environment = [];
        let isGameActive = false;
        let recognition = null;
        let gameSpeed = 0.15;
        let playerPos = { x: 0, y: 2, z: 0 };
        let isVoiceActive = false;
        let particles = [], lights = [], effects = [];
        let lastCommand = '';
        
        // –ö–ê–†–î–ò–ù–ê–õ–¨–ù–ê–Ø –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø 3D –ú–ï–ì–ê –ì–†–ê–§–ò–ö–ò
        function initMegaGame() {
            console.log('üöÄ –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ú–ï–ì–ê –î–í–ò–ñ–ö–ê...');
            
            // –°—Ü–µ–Ω–∞ —Å –º–µ–≥–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
            scene = new THREE.Scene();
            scene.background = new THREE.Color(0x000011);
            scene.fog = new THREE.FogExp2(0x000033, 0.02);
            
            // –ú–µ–≥–∞ –∫–∞–º–µ—Ä–∞
            camera = new THREE.PerspectiveCamera(85, window.innerWidth / window.innerHeight, 0.1, 2000);
            camera.position.set(0, 8, 15);
            
            // –°—É–ø–µ—Ä —Ä–µ–Ω–¥–µ—Ä–µ—Ä —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
            renderer = new THREE.WebGLRenderer({ 
                canvas: document.getElementById('gameCanvas'),
                antialias: true,
                alpha: false,
                powerPreference: 'high-performance'
            });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(window.devicePixelRatio);
            renderer.shadowMap.enabled = true;
            renderer.shadowMap.type = THREE.PCFSoftShadowMap;
            renderer.outputEncoding = THREE.sRGBEncoding;
            renderer.toneMapping = THREE.ACESFilmicToneMapping;
            renderer.toneMappingExposure = 1.2;
            
            // –ú–ï–ì–ê –ö–†–£–¢–û–ô –ò–ì–†–û–ö
            createMegaPlayer();
            
            // –ù–ï–í–ï–†–û–Ø–¢–ù–û–ï –û–ö–†–£–ñ–ï–ù–ò–ï
            createMegaEnvironment();
            
            // –°–ò–°–¢–ï–ú–ê –ú–ï–ì–ê –û–°–í–ï–©–ï–ù–ò–Ø
            createMegaLighting();
            
            // –°–ò–°–¢–ï–ú–ê –ß–ê–°–¢–ò–¶
            createMegaParticles();
            
            console.log('‚úÖ –ú–ï–ì–ê –î–í–ò–ñ–û–ö –ì–û–¢–û–í!');
        }
        
        function createMegaPlayer() {
            // –ú–µ–≥–∞ –≥–µ–æ–º–µ—Ç—Ä–∏—è –∏–≥—Ä–æ–∫–∞
            const playerGeom = new THREE.IcosahedronGeometry(0.8, 2);
            const playerMat = new THREE.MeshPhysicalMaterial({
                color: 0x00ff88,
                emissive: 0x002244,
                metalness: 0.7,
                roughness: 0.2,
                clearcoat: 1.0,
                clearcoatRoughness: 0.1
            });
            
            player = new THREE.Mesh(playerGeom, playerMat);
            player.position.set(0, 2, 0);
            player.castShadow = true;
            player.receiveShadow = true;
            scene.add(player);
            
            // –ú–µ–≥–∞ –∞—É—Ä–∞ –≤–æ–∫—Ä—É–≥ –∏–≥—Ä–æ–∫–∞
            const auraGeom = new THREE.SphereGeometry(1.5, 32, 32);
            const auraMat = new THREE.MeshBasicMaterial({
                color: 0x00ff88,
                transparent: true,
                opacity: 0.1,
                wireframe: true
            });
            const aura = new THREE.Mesh(auraGeom, auraMat);
            player.add(aura);
        }
        
        function createMegaEnvironment() {
            // –ú–µ–≥–∞ –∑–µ–º–ª—è
            const groundGeom = new THREE.PlaneGeometry(200, 200, 50, 50);
            const groundMat = new THREE.MeshStandardMaterial({
                color: 0x111133,
                metalness: 0.3,
                roughness: 0.8,
                wireframe: false
            });
            const ground = new THREE.Mesh(groundGeom, groundMat);
            ground.rotation.x = -Math.PI / 2;
            ground.receiveShadow = true;
            scene.add(ground);
            
            // –ú–µ–≥–∞ –∫—É–±—ã –∏ —Ñ–æ—Ä–º—ã
            for (let i = 0; i < 30; i++) {
                const shapes = [
                    new THREE.BoxGeometry(2, 4, 2),
                    new THREE.ConeGeometry(1, 4, 8),
                    new THREE.CylinderGeometry(1, 1, 4, 12),
                    new THREE.OctahedronGeometry(2)
                ];
                
                const geom = shapes[Math.floor(Math.random() * shapes.length)];
                const mat = new THREE.MeshStandardMaterial({
                    color: new THREE.Color().setHSL(Math.random(), 0.8, 0.6),
                    metalness: Math.random() * 0.8,
                    roughness: Math.random() * 0.5,
                    emissive: new THREE.Color().setHSL(Math.random(), 0.5, 0.1)
                });
                
                const mesh = new THREE.Mesh(geom, mat);
                mesh.position.set(
                    (Math.random() - 0.5) * 80,
                    2,
                    (Math.random() - 0.5) * 80
                );
                mesh.rotation.set(
                    Math.random() * Math.PI,
                    Math.random() * Math.PI,
                    Math.random() * Math.PI
                );
                mesh.castShadow = true;
                mesh.receiveShadow = true;
                
                scene.add(mesh);
                environment.push(mesh);
            }
        }
        
        function createMegaLighting() {
            // –û—Å–Ω–æ–≤–Ω–æ–π —Å–≤–µ—Ç
            const mainLight = new THREE.DirectionalLight(0xffffff, 1.2);
            mainLight.position.set(20, 30, 10);
            mainLight.castShadow = true;
            mainLight.shadow.mapSize.width = 2048;
            mainLight.shadow.mapSize.height = 2048;
            scene.add(mainLight);
            
            // –¶–≤–µ—Ç–Ω—ã–µ –æ–≥–Ω–∏
            const colors = [0xff0080, 0x0080ff, 0x80ff00, 0xff8000];
            for (let i = 0; i < 8; i++) {
                const light = new THREE.PointLight(colors[i % colors.length], 1, 30);
                light.position.set(
                    (Math.random() - 0.5) * 60,
                    5 + Math.random() * 15,
                    (Math.random() - 0.5) * 60
                );
                scene.add(light);
                lights.push(light);
            }
            
            // –û–∫—Ä—É–∂–∞—é—â–∏–π —Å–≤–µ—Ç
            const ambientLight = new THREE.AmbientLight(0x404080, 0.4);
            scene.add(ambientLight);
        }
        
        function createMegaParticles() {
            // –°–∏—Å—Ç–µ–º–∞ –º–µ–≥–∞ —á–∞—Å—Ç–∏—Ü
            const particleCount = 2000;
            const positions = new Float32Array(particleCount * 3);
            const colors = new Float32Array(particleCount * 3);
            
            for (let i = 0; i < particleCount; i++) {
                positions[i * 3] = (Math.random() - 0.5) * 200;
                positions[i * 3 + 1] = Math.random() * 100;
                positions[i * 3 + 2] = (Math.random() - 0.5) * 200;
                
                const color = new THREE.Color().setHSL(Math.random(), 1, 0.5);
                colors[i * 3] = color.r;
                colors[i * 3 + 1] = color.g;
                colors[i * 3 + 2] = color.b;
            }
            
            const particleGeom = new THREE.BufferGeometry();
            particleGeom.setAttribute('position', new THREE.BufferAttribute(positions, 3));
            particleGeom.setAttribute('color', new THREE.BufferAttribute(colors, 3));
            
            const particleMat = new THREE.PointsMaterial({
                size: 0.3,
                vertexColors: true,
                transparent: true,
                opacity: 0.8,
                blending: THREE.AdditiveBlending
            });
            
            const particleSystem = new THREE.Points(particleGeom, particleMat);
            scene.add(particleSystem);
            particles.push(particleSystem);
        }
        
        // –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ê–Ø –ê–ö–¢–ò–í–ê–¶–ò–Ø –ì–û–õ–û–°–û–í–û–ì–û –£–ü–†–ê–í–õ–ï–ù–ò–Ø
        function forceVoiceActivation() {
            console.log('üî• –ü–†–ò–ù–£–î–ò–¢–ï–õ–¨–ù–ê–Ø –ê–ö–¢–ò–í–ê–¶–ò–Ø –ì–û–õ–û–°–ê...');
            
            // –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã
            if ('webkitSpeechRecognition' in window) {
                recognition = new webkitSpeechRecognition();
            } else if ('SpeechRecognition' in window) {
                recognition = new SpeechRecognition();
            } else {
                console.error('‚ùå –ì–æ–ª–æ—Å–æ–≤–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è');
                document.getElementById('voiceReady').textContent = '–ù–ï –ü–û–î–î–ï–†–ñ–ò–í–ê–ï–¢–°–Ø';
                return false;
            }
            
            // –ú–µ–≥–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è
            recognition.continuous = true;
            recognition.interimResults = false;
            recognition.lang = 'ru-RU';
            recognition.maxAlternatives = 1;
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
            recognition.onstart = () => {
                isVoiceActive = true;
                document.getElementById('voiceStatus').innerHTML = 'üé§ –ì–û–õ–û–°: üü¢ –ê–ö–¢–ò–í–ï–ù';
                document.getElementById('voiceStatus').style.background = 'linear-gradient(45deg, rgba(0,255,0,0.9), rgba(0,200,100,0.8))';
                document.getElementById('voiceReady').textContent = '–ê–ö–¢–ò–í–ï–ù';
                console.log('‚úÖ –ì–û–õ–û–°–û–í–û–ï –£–ü–†–ê–í–õ–ï–ù–ò–ï –ê–ö–¢–ò–í–ò–†–û–í–ê–ù–û!');
            };
            
            recognition.onresult = (event) => {
                for (let i = event.resultIndex; i < event.results.length; i++) {
                    if (event.results[i].isFinal) {
                        const command = event.results[i][0].transcript.toLowerCase().trim();
                        console.log('üé§ –ö–û–ú–ê–ù–î–ê:', command);
                        processMegaCommand(command);
                    }
                }
            };
            
            recognition.onerror = (event) => {
                console.log('‚ö†Ô∏è –û—à–∏–±–∫–∞ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è:', event.error);
                if (event.error === 'not-allowed') {
                    document.getElementById('forceActivation').classList.remove('hidden');
                }
                // –ê–≤—Ç–æ–ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
                setTimeout(() => {
                    if (isGameActive && !isVoiceActive) {
                        recognition.start();
                    }
                }, 1000);
            };
            
            recognition.onend = () => {
                if (isGameActive) {
                    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫
                    setTimeout(() => {
                        try {
                            recognition.start();
                        } catch (e) {
                            console.log('–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ 500–º—Å...');
                            setTimeout(() => recognition.start(), 500);
                        }
                    }, 100);
                }
            };
            
            // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫
            try {
                recognition.start();
                console.log('üöÄ –ó–ê–ü–£–°–ö –†–ê–°–ü–û–ó–ù–ê–í–ê–ù–ò–Ø...');
                return true;
            } catch (error) {
                console.error('‚ùå –û–®–ò–ë–ö–ê –ó–ê–ü–£–°–ö–ê:', error);
                document.getElementById('forceActivation').classList.remove('hidden');
                return false;
            }
        }
        
        // –û–ë–†–ê–ë–û–¢–ö–ê –ú–ï–ì–ê –ö–û–ú–ê–ù–î
        function processMegaCommand(command) {
            lastCommand = command;
            console.log('‚ö° –û–ë–†–ê–ë–û–¢–ö–ê:', command);
            
            // –ú—É–ª—å—Ç–∏–≤–∞—Ä–∏–∞–Ω—Ç–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏
            if (command.includes('–≤–ø–µ—Ä–µ–¥') || command.includes('–≤–ø–µ—Ä—ë–¥') || command.includes('forward')) {
                movePlayerMega(0, 0, -gameSpeed * 2);
                createMovementEffect();
            } else if (command.includes('–Ω–∞–∑–∞–¥') || command.includes('back')) {
                movePlayerMega(0, 0, gameSpeed * 2);
                createMovementEffect();
            } else if (command.includes('–≤–ª–µ–≤–æ') || command.includes('–ª–µ–≤–æ') || command.includes('left')) {
                movePlayerMega(-gameSpeed * 2, 0, 0);
                createMovementEffect();
            } else if (command.includes('–≤–ø—Ä–∞–≤–æ') || command.includes('–ø—Ä–∞–≤–æ') || command.includes('right')) {
                movePlayerMega(gameSpeed * 2, 0, 0);
                createMovementEffect();
            } else if (command.includes('–≤–≤–µ—Ä—Ö') || command.includes('–≤–µ—Ä—Ö') || command.includes('up')) {
                movePlayerMega(0, gameSpeed * 1.5, 0);
                createLiftEffect();
            } else if (command.includes('–≤–Ω–∏–∑') || command.includes('–Ω–∏–∑') || command.includes('down')) {
                movePlayerMega(0, -gameSpeed * 1.5, 0);
                createLandEffect();
            } else if (command.includes('—É—Å–∫–æ—Ä–µ–Ω–∏–µ') || command.includes('–±—ã—Å—Ç—Ä–µ–µ') || command.includes('speed')) {
                gameSpeed = Math.min(gameSpeed * 1.8, 2.0);
                createSpeedEffect();
            } else if (command.includes('–º–µ–¥–ª–µ–Ω–Ω–æ') || command.includes('–º–µ–¥–ª–µ–Ω–Ω–µ–µ') || command.includes('slow')) {
                gameSpeed = Math.max(gameSpeed * 0.6, 0.05);
            } else if (command.includes('—Å—Ç–æ–ø') || command.includes('—Å—Ç–æ–π') || command.includes('stop')) {
                gameSpeed = 0;
                setTimeout(() => gameSpeed = 0.15, 2000);
                createStopEffect();
            } else if (command.includes('–≤–∑—Ä—ã–≤') || command.includes('—ç—Ñ—Ñ–µ–∫—Ç') || command.includes('effect')) {
                createMegaExplosion();
            } else if (command.includes('—Ü–≤–µ—Ç') || command.includes('color')) {
                changePlayerColor();
            } else if (command.includes('–º–æ–ª–Ω–∏—è') || command.includes('lightning')) {
                createLightningEffect();
            }
            
            updateMegaUI();
        }
        
        function movePlayerMega(deltaX, deltaY, deltaZ) {
            if (!player) return;
            
            player.position.x += deltaX;
            player.position.y = Math.max(0.8, player.position.y + deltaY);
            player.position.z += deltaZ;
            
            // –ì—Ä–∞–Ω–∏—Ü—ã –º–∏—Ä–∞
            player.position.x = Math.max(-90, Math.min(90, player.position.x));
            player.position.z = Math.max(-90, Math.min(90, player.position.z));
            
            // –ü–ª–∞–≤–Ω–æ–µ —Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –∫–∞–º–µ—Ä—ã
            camera.position.x = player.position.x;
            camera.position.y = player.position.y + 8;
            camera.position.z = player.position.z + 15;
            camera.lookAt(player.position);
            
            playerPos = {
                x: player.position.x.toFixed(2),
                y: player.position.y.toFixed(2),
                z: player.position.z.toFixed(2)
            };
        }
        
        function createMovementEffect() {
            // –≠—Ñ—Ñ–µ–∫—Ç –¥–≤–∏–∂–µ–Ω–∏—è
            const trailGeom = new THREE.ConeGeometry(0.2, 2, 8);
            const trailMat = new THREE.MeshBasicMaterial({
                color: 0x00ff88,
                transparent: true,
                opacity: 0.7
            });
            const trail = new THREE.Mesh(trailGeom, trailMat);
            trail.position.copy(player.position);
            trail.position.y -= 1;
            scene.add(trail);
            
            setTimeout(() => scene.remove(trail), 500);
        }
        
        function createMegaExplosion() {
            console.log('üí• –ú–ï–ì–ê –í–ó–†–´–í!');
            
            for (let i = 0; i < 100; i++) {
                const sparkGeom = new THREE.SphereGeometry(0.1, 6, 6);
                const sparkMat = new THREE.MeshBasicMaterial({
                    color: new THREE.Color().setHSL(Math.random(), 1, 0.6)
                });
                const spark = new THREE.Mesh(sparkGeom, sparkMat);
                
                spark.position.copy(player.position);
                spark.userData.velocity = new THREE.Vector3(
                    (Math.random() - 0.5) * 5,
                    Math.random() * 5,
                    (Math.random() - 0.5) * 5
                );
                
                scene.add(spark);
                effects.push(spark);
                
                setTimeout(() => {
                    scene.remove(spark);
                    effects.splice(effects.indexOf(spark), 1);
                }, 3000);
            }
        }
        
        function changePlayerColor() {
            if (player && player.material) {
                const newColor = new THREE.Color().setHSL(Math.random(), 0.8, 0.6);
                player.material.color = newColor;
                player.material.emissive.setHSL(Math.random(), 0.5, 0.2);
            }
        }
        
        function createLightningEffect() {
            // –≠—Ñ—Ñ–µ–∫—Ç –º–æ–ª–Ω–∏–∏
            const lightningGeom = new THREE.CylinderGeometry(0.05, 0.05, 20, 8);
            const lightningMat = new THREE.MeshBasicMaterial({
                color: 0xffffff,
                transparent: true,
                opacity: 0.9
            });
            const lightning = new THREE.Mesh(lightningGeom, lightningMat);
            lightning.position.copy(player.position);
            lightning.position.y += 10;
            scene.add(lightning);
            
            setTimeout(() => scene.remove(lightning), 200);
        }
        
        function updateMegaUI() {
            document.getElementById('speed').textContent = gameSpeed.toFixed(3);
            document.getElementById('posX').textContent = playerPos.x;
            document.getElementById('posY').textContent = playerPos.y;
            document.getElementById('posZ').textContent = playerPos.z;
        }
        
        // –ú–ï–ì–ê –ò–ì–†–û–í–û–ô –¶–ò–ö–õ
        function megaGameLoop() {
            if (!isGameActive) return;
            
            requestAnimationFrame(megaGameLoop);
            
            const time = Date.now() * 0.001;
            
            // –ê–Ω–∏–º–∞—Ü–∏—è –∏–≥—Ä–æ–∫–∞
            if (player) {
                player.rotation.y += 0.02;
                player.rotation.x = Math.sin(time) * 0.1;
                player.position.y += Math.sin(time * 2) * 0.01;
                
                // –ü—É–ª—å—Å–∞—Ü–∏—è –∞—É—Ä—ã
                if (player.children[0]) {
                    player.children[0].rotation.y -= 0.03;
                    player.children[0].scale.setScalar(1 + Math.sin(time * 3) * 0.1);
                }
            }
            
            // –ê–Ω–∏–º–∞—Ü–∏—è —á–∞—Å—Ç–∏—Ü
            particles.forEach(particleSystem => {
                particleSystem.rotation.y += 0.005;
                particleSystem.rotation.x += 0.002;
            });
            
            // –ê–Ω–∏–º–∞—Ü–∏—è –æ—Å–≤–µ—â–µ–Ω–∏—è
            lights.forEach((light, index) => {
                light.intensity = 1 + Math.sin(time + index) * 0.5;
                light.position.y += Math.sin(time * 2 + index) * 0.02;
            });
            
            // –ê–Ω–∏–º–∞—Ü–∏—è –æ–∫—Ä—É–∂–µ–Ω–∏—è
            environment.forEach((obj, index) => {
                obj.rotation.y += 0.01 + index * 0.001;
                obj.rotation.x += 0.005;
                obj.position.y = 2 + Math.sin(time + index) * 0.5;
            });
            
            // –ê–Ω–∏–º–∞—Ü–∏—è —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
            effects.forEach(effect => {
                if (effect.userData.velocity) {
                    effect.position.add(effect.userData.velocity.clone().multiplyScalar(0.1));
                    effect.userData.velocity.y -= 0.01; // –≥—Ä–∞–≤–∏—Ç–∞—Ü–∏—è
                    effect.material.opacity *= 0.99;
                }
            });
            
            renderer.render(scene, camera);
        }
        
        // –ê–í–¢–û–ó–ê–ü–£–°–ö –ò–ì–†–´
        function autoStartMegaGame() {
            console.log('üöÄ –ê–í–¢–û–ó–ê–ü–£–°–ö –ú–ï–ì–ê –ò–ì–†–´...');
            
            isGameActive = true;
            document.getElementById('autoStart').classList.add('hidden');
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è 3D
            initMegaGame();
            
            // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –∞–∫—Ç–∏–≤–∞—Ü–∏—è –≥–æ–ª–æ—Å–∞
            setTimeout(() => {
                forceVoiceActivation();
            }, 500);
            
            // –ó–∞–ø—É—Å–∫ –∏–≥—Ä–æ–≤–æ–≥–æ —Ü–∏–∫–ª–∞
            megaGameLoop();
            updateMegaUI();
            
            // –°–æ–∑–¥–∞–Ω–∏–µ UI —á–∞—Å—Ç–∏—Ü
            createUIParticles();
            
            console.log('‚úÖ –ú–ï–ì–ê –ò–ì–†–ê –ó–ê–ü–£–©–ï–ù–ê!');
        }
        
        function createUIParticles() {
            // –°–æ–∑–¥–∞–Ω–∏–µ —á–∞—Å—Ç–∏—Ü –≤ UI
            for (let i = 0; i < 20; i++) {
                const particle = document.createElement('div');
                particle.className = 'ui-particle';
                particle.style.left = Math.random() * window.innerWidth + 'px';
                particle.style.top = Math.random() * window.innerHeight + 'px';
                particle.style.animationDelay = Math.random() * 4 + 's';
                document.getElementById('ui').appendChild(particle);
            }
        }
        
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞
        function onWindowResize() {
            if (camera && renderer) {
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth, window.innerHeight);
            }
        }
        
        // –°–æ–±—ã—Ç–∏—è
        document.getElementById('autoStart').addEventListener('click', autoStartMegaGame);
        document.getElementById('forceActivation').addEventListener('click', () => {
            forceVoiceActivation();
            document.getElementById('forceActivation').classList.add('hidden');
        });
        window.addEventListener('resize', onWindowResize);
        
        // –ê–≤—Ç–æ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.addEventListener('load', () => {
            console.log('üåü –ú–ï–ì–ê –°–ò–°–¢–ï–ú–ê –ì–û–¢–û–í–ê –ö –ó–ê–ü–£–°–ö–£!');
            console.log('üéÆ –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –¥–ª—è –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞ —Å –≥–æ–ª–æ—Å–æ–≤—ã–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º!');
            
            // –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
            if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
                document.getElementById('voiceStatus').innerHTML = 'üì± –ú–û–ë–ò–õ–¨–ù–ê–Ø –í–ï–†–°–ò–Ø –ì–û–¢–û–í–ê';
            }
        });
        
        // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –¥–ª—è –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
        setInterval(() => {
            if (isGameActive && !isVoiceActive && recognition) {
                console.log('üîÑ –ê–í–¢–û–ü–ï–†–ï–ó–ê–ü–£–°–ö –ì–û–õ–û–°–û–í–û–ì–û –£–ü–†–ê–í–õ–ï–ù–ò–Ø...');
                try {
                    recognition.start();
                } catch (e) {
                    console.log('–û–∂–∏–¥–∞–Ω–∏–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞...');
                }
            }
        }, 3000);
    </script>
</body>
</html>
